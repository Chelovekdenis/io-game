<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Medieval War</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, shrink-to-fit=no">
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.js" integrity="sha256-DrT5NfxfbHvMHux31Lkhxg42LY6of8TaYyK50jnxRnM=" crossorigin="anonymous"></script>
<!--    <script src="https://yandex.ru/games/sdk/v2"></script>-->
<!--    <script>-->
<!--        YaGames-->
<!--            .init({-->
<!--                adv: {-->
<!--                    onAdvClose: wasShown => {-->
<!--                        console.info('adv closed!');-->
<!--                    }-->
<!--                }-->
<!--            })-->
<!--            .then(ysdk => {-->
<!--                const buttonElem = document.querySelector('#button');-->
<!--                buttonElem.addEventListener('click', () => {-->
<!--                    ysdk.adv.showRewardedVideo({-->
<!--                        callbacks: {-->
<!--                            onOpen: () => {-->
<!--                                localStorage.setItem('reklama', '0');-->
<!--                                console.log('Video ad open.');-->
<!--                            },-->
<!--                            onRewarded: () => {-->
<!--                                console.log('REWARDED (1)-> ');-->
<!--                            },-->
<!--                            onClose: () => {-->
<!--                                localStorage.setItem('reklama', '1');-->
<!--                                console.log('Video ad closed.');-->
<!--                            },-->
<!--                            onError: (e) => {-->
<!--                                console.log('Error while open video ad:', e);-->
<!--                            }-->
<!--                        }-->
<!--                    })-->
<!--                })-->
<!--            });-->
<!--    </script>-->

    <script type="text/javascript">
        (function(w, d, n, s, t) {
            w[n] = w[n] || [];
            w[n].push(function() {
                Ya.Context.AdvManager.render({
                    blockId: "R-A-757163-1",
                    renderTo: "yandex_rtb_R-A-757163-1",
                    async: true,
                    onRender: function (data) {
                        console.log("On Render");
                    }
                });
            });
            t = d.getElementsByTagName("script")[0];
            s = d.createElement("script");
            s.type = "text/javascript";
            s.src = "//an.yandex.ru/system/context.js";
            s.async = true;
            t.parentNode.insertBefore(s, t);
        })(this, this.document, "yandexContextAsyncCallbacks");
    </script>
</head>
<body>
<div id="yandex_rtb_R-A-757163-1" class="hidden"></div>
<canvas id="game-canvas"></canvas>
<div id="play-menu" class="hidden">
    <h1>Medieval War</h1>
    <div class="select">
<!--        <div class="air_space">-->
<!--            Используйте умения при помощи цифр на клавиатуре-->
<!--        </div>-->
        <div class="air_space">
            To use skills press numbers on the keyboard
        </div>
        <label>
            <select id="server_list">
                <!--            <option value = "0">Server 1</option>-->
                <!--            <option value = "1">Server 2</option>-->
                <!--            <option value = "2">Server 3</option>-->
            </select>
        </label>
    </div>
    <div class="form">
<!--        <input type="text" id="username-input" placeholder="Ваше имя" />-->
<!--        <button id="play-button">ИГРАТЬ</button>-->
        <input type="text" id="username-input" placeholder="Your name" />
        <button id="play-button">PLAY</button>
    </div>
</div>

<script >
    $(document).keypress(function (e) {
        if (e.which == 13) {
            document.getElementById("play-button").click()
        }
    })
</script>
<div id="disconnect-modal" class="hidden">
    <div>
<!--        <h2>Вы погибли</h2>-->
<!--        <button id="button">ВЕРНУТСЯ С 0 УРОВНЕМ</button> <br>-->
<!--        <button id="reconnect-button">ВЕРНУТЬСЯ</button>-->
        <h2>You are dead</h2>
        <button id="button">BACK WITH LEVEL 0</button> <br>
        <button id="reconnect-button">COME BACK </button>
    </div>
</div>

<script type="text/javascript">
    const buttonElem = document.querySelector('#button');
    buttonElem.addEventListener('click', () => {
        document.getElementById('disconnect-modal').classList.add('hidden')
        document.getElementById('game-canvas').classList.add('hidden')
        document.getElementById('yandex_rtb_R-A-757163-1').classList.remove('hidden')
        setTimeout(() => {
            localStorage.setItem('reklama', '1');
            document.getElementById('game-canvas').classList.remove('hidden')
            document.getElementById('yandex_rtb_R-A-757163-1').classList.add('hidden')

        }, 3000)
    })
</script>
</body>
</html>
